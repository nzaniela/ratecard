<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <!-- Quotation Template Form View -->
        <record id="view_sale_order_template_form" model="ir.ui.view">
            <field name="name">sale.order.template.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">

                <xpath expr="//field[@name='order_line']/form/group/group/field[@name='product_id']" position="after">
                    <field name="product_name"/>
                    <field name="ad_type"/>
                    <field name="outlet" />
                    <field name="outlet_type"/>
                    <field name="schedule_type"/>
                    <field  name="spot_length"/>
                    <field name="timeband"/>
                    <field name="rate"/>
                    <field name="noof_spots"/>
                    <field name="total_spots"/>
                    <field name="weeks"/>
                </xpath>
                <field name="product_name"/>
                <field name="outlet"/>
                <label for="product_uom_qty" position="before">
                    <field name="rag_qty" attrs="{'invisible': [('ragproduct', '=', False)], 'required': [('ragproduct', '=', True)]}"/>
                </label>
                <xpath   expr="//field[@name='order_line']/tree/field[@name='product_id']"  position="after">
                    <field name="product_name"/>
                    <field name="ad_type"/>
                    <field name="outlet" />
                    <field name="outlet_type"/>
                    <field name="schedule_type"/>
                    <field  name="spot_length"/>
                    <field name="timeband"/>
                    <field name="rate"/>
                    <field name="noof_spots"/>
                    <field name="total_spots"/>
                    <field name="weeks"/>


                </xpath>
            </field>
        </record>


        <!-- Quotation Template Tree View -->
        <record id="view_sale_order_template_tree" model="ir.ui.view">
            <field name="name">sale.order.template.tree</field>
            <field name="model">sale.order</field>
            <field name="priority">2</field>
            <field name="arch" type="xml">
                <tree string="Quotation Templates">
                    <field name="message_unread" invisible="1"/>
                    <field name="name" string="Name"/>
                    <field name="date_order"/>
                    <field name="partner_id"/>
                    <field name="user_id"/>
                    <field name="amount_total" sum="Total Tax Included"/>
                    <field name="state" invisible="1"/>
                </tree>
            </field>
        </record>

        <!-- Quotation Template Action -->
        <record id='action_sale_order_tempalte' model='ir.actions.act_window'>
            <field name="name">Singular  Quotation Templates</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_is_template': True}</field>
            <field name="domain">[('is_template', '=', True)]</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new sale template.
                </p>
            </field>
        </record>

        <record id="action_sale_order_tempalte_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_sale_order_template_tree"/>
            <field name="act_window_id" ref="action_sale_order_tempalte"/>
        </record>

        <record id="action_sale_order_tempalte_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_sale_order_template_form"/>
            <field name="act_window_id" ref="action_sale_order_tempalte"/>
        </record>


        <!-- Sale Order Form View -->
        <record id="view_sale_order_template_inherited_form" model="ir.ui.view">
            <field name="name">sale.order.template.inherited.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="after">
                    <field name="template_id" context="{'default_is_template': True, 'form_view_ref': 'view_sale_order_template_form'}"
                           on_change="onchange_template(template_id, partner_id, pricelist_id, fiscal_position)"/>
                </field>
            </field>
        </record>

        <!-- Sale Order Action -->
        <record id="sale.action_orders" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="search_view_id" ref="sale.view_sales_order_filter"/>
            <field name="context">{}</field>
            <field name="domain">[('state','not in',('draft','sent','cancel')), ('is_template', '=', False)]</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a quotation that can be converted into a sales order.
                </p>
                <p>
                    Efficiently handle the complete sales flow:
                    quotation, sales order, delivery, invoicing and payment.
                </p>
            </field>
        </record>

        <!-- Quotation Action -->
        <record id="sale.action_quotations" model="ir.actions.act_window">
            <field name="name">Quotations</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="sale.view_quotation_tree"/>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="context">{}</field>
            <field name="domain">[('state','in',('draft','sent','cancel')), ('is_template', '=', False)]</field>
            <field name="search_view_id" ref="sale.view_sales_order_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a quotation, the first step of a new sale.
                </p>
                <p>
                    Handle efficiently the complete sale flow:
                    from the quotation to the sales order, the
                    delivery, the invoicing and the payment collection.
                </p>
                <p>
                    The social feature helps you organize discussions on each sales
                    order, and allow your customers to keep track of the evolution
                    of the sales order.
                </p>
            </field>
        </record>
        <!-- Quotation Template Menu -->
        <!--<menuitem id="menu_sale_template" action="action_sale_order_tempalte" parent="base.menu_sales" sequence="3"/>-->
        <menuitem id="timeorder_singulars_quotation" name="SINGULAR QUOTATIONS" sequence="2" parent ="timeorder_management_menu"/>
        <menuitem  name="SINGULAR QUOTATION" id="menu_singulars_quotations"  action="action_sale_order_tempalte"  parent="timeorder_singulars_quotation"/>

    </data>
</openerp>
